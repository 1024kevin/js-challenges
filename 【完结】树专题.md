## JSON2DOM
```html

```

```javascript
// 真正的渲染函数
function _render(vnode) {
  // 如果是数字类型转化为字符串
  if (typeof vnode === "number") {
    vnode = String(vnode);
  }
  // 字符串类型直接就是文本节点
  if (typeof vnode === "string") {
    return document.createTextNode(vnode);
  }
  // 普通DOM
  const dom = document.createElement(vnode.tag);
  if (vnode.attrs) {
    // 遍历属性
    Object.keys(vnode.attrs).forEach((key) => {
      const value = vnode.attrs[key];
      dom.setAttribute(key, value);
    });
  }
  // 子数组进行递归操作
  vnode.children.forEach((child) => dom.appendChild(_render(child)));
  return dom;
}
```

## 计算目录树的深度
```javascript
const tree = {
    name: 'root',
    children: [
        { name: '叶子1-1' },
        { name: '叶子1-2' },
        {
            name: '叶子2-1',
            children: [{
                name: '叶子3-1',
                children: [{
                    name: '叶子4-1',
                    children: [{}]
                }]
            }]
        }
    ]
}

function getLevel(tree) {
    if (tree == null) return 0;
    const queue = [tree]
    let dep = 0;
    while (queue.length) {
        dep++;
        const size = queue.length
        for (let i = 0; i < size; i++) {
            const node = queue.shift()
            if (node.children) {
                for (const child of node.children) {
                    queue.push(child)
                }
            }
        }
    }
    return dep
}
console.log(getLevel(tree));
```

## 树形结构获取路径名
```javascript
const treeData = [
    {
        name: "root",
        children: [
            { name: "src", children: [{ name: "index.html" }] },
            { name: "public", children: [] },
        ],
    },
];
const RecursiveTree = (data) => {
    const res = []
    const dfs = (data) => {
        data.forEach(ele => {
            res.push(ele.name)
            ele.children && dfs(ele.children)
        });
    }
    dfs(data)
    return res;
}
console.log(RecursiveTree(treeData));
```

## 树形结构转成列表
```javascript
const data = [
    {
        id: 1,
        text: '节点1',
        parentId: 0,
        children: [
            {
                id: 2,
                text: '节点1_1',
                parentId: 1
            }
        ]
    }
]
//直接放，删除逻辑
function treeToList(data) {
    let res = [];
    const dfs = (tree) => {
        tree.forEach((item) => {
            if (item.children) {
                dfs(item.children);
                delete item.children;
            }
            res.push(item);
        });
    };
    dfs(data);
    return res;
}
//直接放需要的，我写的
function treeToList(data) {
    const res = []
    function dfs(data) {
        const obj = {}
        data.forEach(ele => {
            obj.id = ele.id
            obj.text = ele.text
            obj.parentId = ele.parentId
            ele.children && dfs(ele.children)
        });

        res.push(obj)
    }
    dfs(data)
    return res;
}
```
## 列表转成树形结构
```javascript
let arr = [
    { id: 1, name: '部门1', pid: 0 },
    { id: 2, name: '部门2', pid: 1 },
    { id: 3, name: '部门3', pid: 1 },
    { id: 4, name: '部门4', pid: 3 },
    { id: 5, name: '部门5', pid: 4 },
    { id: 6, name: '部门6', pid: 0 },
]
function formate(data) {
    let _data = JSON.parse(JSON.stringify(data));
    return _data.filter(p => {
        const arr = _data.filter(c => c.pid === p.id);
        arr.length && (p.children = arr);
        return p.pid === 0
    })
}
console.log(formate(arr))
function dfs(data) {
    const res = [];
    const map = {};
    data.forEach(item => {
        map[item.id] = item;
    })
    data.forEach(item => {
        let parent = map[item.pid];
        if (parent) {
            (parent.children || (parent.children = [])).push(item);
        } else {
            res.push(item);
        }
    })
    return res;
}
console.log(dfs(arr))
function parse(arr) {
  const cache = new Map()
  const res = []

  // 保存每一个id
  arr.forEach(item => {
    cache.set(item.id, item)
  })

  // 重新遍历，如果pid不存在说明是顶级父亲，放入res
  // 否则就加入对应父亲的children中
  arr.forEach(item => {
    const parent = cache.get(item.pid)
    if (!parent) res.push(item)
    else {
      parent.children = parent.children ?? []
      parent.children.push(item)
    }
  })
  return res
}

```
```javascript
const rootList = [
    { id: 1, parent: null, text: "菜单1" },
    { id: 11, parent: 1, text: "菜单1-1" },
    { id: 12, parent: 1, text: "菜单1-2" },
    { id: 2, parent: null, text: "菜单2" },
    { id: 21, parent: 2, text: "菜单2-1" },
];

function getTreeList(rootList, id, list) {
    for (const item of rootList) {
        if (item.parent === id) {
            list.push(item);
        }
    }
    for (const i of list) {
        i.children = [];
        getTreeList(rootList, i.id, i.children);
        if (i.children.length === 0) {
            delete i.children;
        }
    }
    return list;
}
const res = getTreeList(rootList, null, []);
console.log("res", res);
```


## 对象树遍历

```javascript
const tree = {
    name: 'root',
    children: [
        {
            name: 'c1',
            children: [
                {
                    name: 'c11',
                    children: []
                },
                {
                    name: 'c12',
                    children: []
                }
            ]
        },
        {
            name: 'c2',
            children: [
                {
                    name: 'c21',
                    children: []
                },
                {
                    name: 'c22',
                    children: []
                }
            ]
        }
    ]
}

// 深度优先的方式遍历 打印 name
// ['root', 'c1','c11', 'c12', 'c2', 'c21', 'c22']
// 我写的
function solve(root) {
    const res = []
    function dfs(root) {
        for (const key in root) {
            if (key === 'name') {
                res.push(root[key])
            } else if (key === 'children') {
                root[key].forEach(ele => {
                    dfs(ele)
                });
            }
        }
    }
    dfs(root)
    return res;
}
console.log(solve(tree));
```

## 获取树对象属性

```javascript
var tree = {
    name: '中国',
    children: [
        {
            name: '北京',
            children: [
                {
                    name: '朝阳群众'
                },
                {
                    name: '海淀区'
                },
                {
                    name: '昌平区'
                }
            ]
        },
        {
            name: '浙江省',
            children: [
                {
                    name: '杭州市',
                    code: '0571',
                },
                {
                    name: '嘉兴市'
                },
                {
                    name: '绍兴市'
                },
                {
                    name: '宁波市'
                }
            ]
        }
    ]
};

function fn(tree, name) {
    const obj = {}
    function dfs(tree) {
        for (const key in tree) {
            if (tree.name === name) {
                obj[key] = tree[key]
            } else {
                tree.children && tree.children.forEach(ele => {
                    dfs(ele)
                });
            }
        }
    }
    dfs(tree)
    return obj
}

function fn(tree, name) {
    //bfs
    let Queue = [[tree.name, tree.children]];
    while (Queue.length > 0) {
        //出队当前节点
        let cur = Queue.shift();
        if (cur[0] === name) return { name: name, code: cur[1] }
        //将children入队
        if (cur.length === 1) continue;

        for (let node of cur[1]) {
            let obj = [node.name];
            if (node.hasOwnProperty("children")) obj.push(node.children);
            if (node.hasOwnProperty("code")) obj.push(node.code);
            Queue.push(obj);
        }
    }
    return -1;
}
var node = fn(tree, '杭州市');
console.log(node);    // { name: '杭州市', code: 0571 }
```

## 查找json中的children路径
现有如下json（简化为对象），已知每个节点id唯一，编写findNode(id)，返回路径，如findNode(5 输出 1->4->5

```javascript
json = {
    id: 1,
    children: [
        { id: 2, children: [{ id: 3, children: [] }] },
        {
            id: 4,
            children: [
                { id: 5, children: [] },
                { id: 6, children: [] },
            ],
        },
        { id: 7, children: [] },
    ],
};
let result = []
// 独立完成
function findNode(obj) {
    const res = []
    function dfs(obj, currPath, target) {
        if (!obj) return;
        if (obj.id === target) {
            currPath += obj.id
            res.push(currPath)
            return
        }
        currPath += obj.id + '->'
        obj.children && obj.children.forEach(ele => {
            dfs(ele, currPath, target)
        });
    }
    dfs(obj, '', 5)
    return res;
}
console.log(findNode(json));
```




## 对象字符串转化成树形结构
```javascript
let strarr = {  
  'a-b-c-d':1,  
  'a-b-c-e':2,  
  'a-b-f':3,  
  'a-j':4  
}  
let obj = {  
  a:{  
    b:{  
      c:{  
        d:1,  
        e:2  
      },  
      f:3  
    },  
    j:4  
  }  
} 
function parse(obj) {
  let ans = {}
  for (let att in obj) {
    let temp = ans;
    for (let i = 0, len = att.length; i < len; i += 2) {
      let cur = att[i];
      if (i == len - 1) {
        temp[cur] = obj[att];
      } else {
        if (!temp[cur]) {
          temp[cur] = {};
        }
        temp = temp[cur];
      }
    }
  }
  return ans;
}
```

```javascript
const input = {
    'a.b.c': 1,
    'a.b.d': 2,
    'a.e': 3,
    'f': 4,
};
const output = {
    a: {
        b: {
            c: 1,
            d: 2
        },
        e: 3
    },
    f: 4
};

console.log(process(input))
console.log(output)

function process(input) {
  const keys = Object.keys(input)
  const res = {}
  for (const key of keys) {
    const chain = key.split('.')
    let temp = res
    for (let i = 0; i < chain.length; i++) {
      const k = chain[i]
      temp[k] = temp[k] ?? (i === chain.length - 1 ? input[key] : {})
      temp = temp[k]
    }
  }
  return res
}
```



## 判断有无符合路径和 -> 打印所有路径
```javascript
const data3 = [
    {
        id: 1,
        name: '前端',
        children: [
            {
                id: 2,
                name: 'html',
                children: [
                    { id: 5, name: 'vue', children: [] },
                    { id: 6, name: 're', children: [] },
                ]
            },
            {
                id: 3,
                name: 'html',
                children: [
                    { id: 7, name: 'vue', children: [] },
                    { id: 8, name: 're', children: [] },
                ]
            }
        ]
    }
]
function findData(data, id = 1) {
    let queue = [data[0]]
    let map = new Map()
    map.set(data[0], [data[0].name])
    while (queue.length) {
        let length = queue.length
        for (let i = 0; i < length; i++) {
            let node = queue.shift()
            for (let i = 0; i < node.children.length; i++) {
                if (node.children[i].id === id) {
                    return [...map.get(node), node.children[i].name].join('-')
                } else {
                    queue.push(node.children[i])
                    map.set(node.children[i], [...map.get(node), node.children[i].name])
                }
            }
        }
        console.log(map);
    }

}
console.log(findData(data3, 5));//前端-html-vue
```
```javascript
let treeArray = [{
    id: 1,
    nodeName: 'a',
    children: [{
        id: 11,
        nodeName: 'ab',
        children: [{
            id: 111,
            nodeName: 'abc'
        },
        {
            id: 112,
            nodeName: 'abd'
        }
        ]
    },
    {
        id: 12,
        nodeName: 'ac',
        children: [{
            id: 121,
            nodeName: 'aca'
        }]
    }
    ]
},
{
    id: 2,
    nodeName: 'b'
},
{
    id: 3,
    nodeName: 'c',
    children: [{
        id: 31,
        nodeName: 'cb',
        children: [{
            id: 311,
            nodeName: 'cbc'
        },
        {
            id: 312,
            nodeName: 'cbd'
        }
        ]
    },
    {
        id: 32,
        nodeName: 'cc',
        children: [{
            id: 321,
            nodeName: 'cca'
        }]
    }
    ]
},
{
    id: 4,
    nodeName: 'd'
}
];

// 首先我们先定义个数组，用来保存路径节点id
let nodePathArray = []

// (tree为目标树，targetId为目标节点id)
function getNodeRoute(tree, targetId) {
    for (let index = 0; index < tree.length; index++) {
        if (tree[index].children) {
            let endRecursiveLoop = getNodeRoute(tree[index].children, targetId)
            if (endRecursiveLoop) {
                nodePathArray.push(tree[index].id)
                return true
            }
        }
        if (tree[index].id === targetId) {
            nodePathArray.push(tree[index].id)
            return true
        }
    }
}

getNodeRoute(treeArray, 112) //查找id为112的节点路径
console.log(nodePathArray.reverse().join('->'));

```
## getName
```javascript
let data = [
      {
          "name": "1-1",
          "kind": "oo",
          "children": [
              {
                  "name": "2-2",
                  "kind": "ii",

              },
              {
                  "name": "3-3",
                  "children": [
                      {
                          "name": "4-4",
                          "children": [
                              {
                                  "name": '707'
                              }
                          ]
                      }
                  ]
              }
          ]
      },
      {
          "name": "5-5",
      },
      {
          "name": "6-6"
      }
  ]
  function getName(data, key = "name") {
      let result = [];
      if (Array.isArray(data)) {
          for (let item of data) {
              if (item[key]) {
                  result.push(item[key]);
              }
              if (item.children) {
                  result = result.concat(getName(item.children));
              }
          }
          return result;
      } else {
          return result;
      }
  }

  console.log(getName(data))
```
