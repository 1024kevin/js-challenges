






## 对象树遍历

```javascript
const tree = {
    name: 'root',
    children: [
        {
            name: 'c1',
            children: [
                {
                    name: 'c11',
                    children: []
                },
                {
                    name: 'c12',
                    children: []
                }
            ]
        },
        {
            name: 'c2',
            children: [
                {
                    name: 'c21',
                    children: []
                },
                {
                    name: 'c22',
                    children: []
                }
            ]
        }
    ]
}

// 深度优先的方式遍历 打印 name
// ['root', 'c1','c11', 'c12', 'c2', 'c21', 'c22']
// 我写的
function solve(root) {
    const res = []
    function dfs(root) {
        for (const key in root) {
            if (key === 'name') {
                res.push(root[key])
            } else if (key === 'children') {
                root[key].forEach(ele => {
                    dfs(ele)
                });
            }
        }
    }
    dfs(root)
    return res;
}
console.log(solve(tree));
```

## 获取树对象属性

```javascript
var tree = {
    name: '中国',
    children: [
        {
            name: '北京',
            children: [
                {
                    name: '朝阳群众'
                },
                {
                    name: '海淀区'
                },
                {
                    name: '昌平区'
                }
            ]
        },
        {
            name: '浙江省',
            children: [
                {
                    name: '杭州市',
                    code: '0571',
                },
                {
                    name: '嘉兴市'
                },
                {
                    name: '绍兴市'
                },
                {
                    name: '宁波市'
                }
            ]
        }
    ]
};

function fn(tree, name) {
    const obj = {}
    function dfs(tree) {
        for (const key in tree) {
            if (tree.name === name) {
                obj[key] = tree[key]
            } else {
                tree.children && tree.children.forEach(ele => {
                    dfs(ele)
                });
            }
        }
    }
    dfs(tree)
    return obj
}

function fn(tree, name) {
    //bfs
    let Queue = [[tree.name, tree.children]];
    while (Queue.length > 0) {
        //出队当前节点
        let cur = Queue.shift();
        if (cur[0] === name) return { name: name, code: cur[1] }
        //将children入队
        if (cur.length === 1) continue;

        for (let node of cur[1]) {
            let obj = [node.name];
            if (node.hasOwnProperty("children")) obj.push(node.children);
            if (node.hasOwnProperty("code")) obj.push(node.code);
            Queue.push(obj);
        }
    }
    return -1;
}
var node = fn(tree, '杭州市');
console.log(node);    // { name: '杭州市', code: 0571 }
```

## 查找json中的children路径
现有如下json（简化为对象），已知每个节点id唯一，编写findNode(id)，返回路径，如findNode(5 输出 1->4->5

```javascript
json = {
    id: 1,
    children: [
        { id: 2, children: [{ id: 3, children: [] }] },
        {
            id: 4,
            children: [
                { id: 5, children: [] },
                { id: 6, children: [] },
            ],
        },
        { id: 7, children: [] },
    ],
};
let result = []
// 独立完成
function findNode(obj) {
    const res = []
    function dfs(obj, currPath, target) {
        if (!obj) return;
        if (obj.id === target) {
            currPath += obj.id
            res.push(currPath)
            return
        }
        currPath += obj.id + '->'
        obj.children && obj.children.forEach(ele => {
            dfs(ele, currPath, target)
        });
    }
    dfs(obj, '', 5)
    return res;
}
console.log(findNode(json));
```




## 对象字符串转化成树形结构
```javascript
let strarr = {  
  'a-b-c-d':1,  
  'a-b-c-e':2,  
  'a-b-f':3,  
  'a-j':4  
}  
let obj = {  
  a:{  
    b:{  
      c:{  
        d:1,  
        e:2  
      },  
      f:3  
    },  
    j:4  
  }  
} 
function parse(obj) {
  let ans = {}
  for (let att in obj) {
    let temp = ans;
    for (let i = 0, len = att.length; i < len; i += 2) {
      let cur = att[i];
      if (i == len - 1) {
        temp[cur] = obj[att];
      } else {
        if (!temp[cur]) {
          temp[cur] = {};
        }
        temp = temp[cur];
      }
    }
  }
  return ans;
}
```

```javascript
const input = {
    'a.b.c': 1,
    'a.b.d': 2,
    'a.e': 3,
    'f': 4,
};
const output = {
    a: {
        b: {
            c: 1,
            d: 2
        },
        e: 3
    },
    f: 4
};

console.log(process(input))
console.log(output)

function process(input) {
  const keys = Object.keys(input)
  const res = {}
  for (const key of keys) {
    const chain = key.split('.')
    let temp = res
    for (let i = 0; i < chain.length; i++) {
      const k = chain[i]
      temp[k] = temp[k] ?? (i === chain.length - 1 ? input[key] : {})
      temp = temp[k]
    }
  }
  return res
}
```



## 判断有无符合路径和 -> 打印所有路径
```javascript
const data3 = [
    {
        id: 1,
        name: '前端',
        children: [
            {
                id: 2,
                name: 'html',
                children: [
                    { id: 5, name: 'vue', children: [] },
                    { id: 6, name: 're', children: [] },
                ]
            },
            {
                id: 3,
                name: 'html',
                children: [
                    { id: 7, name: 'vue', children: [] },
                    { id: 8, name: 're', children: [] },
                ]
            }
        ]
    }
]
function findData(data, id = 1) {
    let queue = [data[0]]
    let map = new Map()
    map.set(data[0], [data[0].name])
    while (queue.length) {
        let length = queue.length
        for (let i = 0; i < length; i++) {
            let node = queue.shift()
            for (let i = 0; i < node.children.length; i++) {
                if (node.children[i].id === id) {
                    return [...map.get(node), node.children[i].name].join('-')
                } else {
                    queue.push(node.children[i])
                    map.set(node.children[i], [...map.get(node), node.children[i].name])
                }
            }
        }
        console.log(map);
    }

}
console.log(findData(data3, 5));//前端-html-vue
```
```javascript
let treeArray = [{
    id: 1,
    nodeName: 'a',
    children: [{
        id: 11,
        nodeName: 'ab',
        children: [{
            id: 111,
            nodeName: 'abc'
        },
        {
            id: 112,
            nodeName: 'abd'
        }
        ]
    },
    {
        id: 12,
        nodeName: 'ac',
        children: [{
            id: 121,
            nodeName: 'aca'
        }]
    }
    ]
},
{
    id: 2,
    nodeName: 'b'
},
{
    id: 3,
    nodeName: 'c',
    children: [{
        id: 31,
        nodeName: 'cb',
        children: [{
            id: 311,
            nodeName: 'cbc'
        },
        {
            id: 312,
            nodeName: 'cbd'
        }
        ]
    },
    {
        id: 32,
        nodeName: 'cc',
        children: [{
            id: 321,
            nodeName: 'cca'
        }]
    }
    ]
},
{
    id: 4,
    nodeName: 'd'
}
];

// 首先我们先定义个数组，用来保存路径节点id
let nodePathArray = []

// (tree为目标树，targetId为目标节点id)
function getNodeRoute(tree, targetId) {
    for (let index = 0; index < tree.length; index++) {
        if (tree[index].children) {
            let endRecursiveLoop = getNodeRoute(tree[index].children, targetId)
            if (endRecursiveLoop) {
                nodePathArray.push(tree[index].id)
                return true
            }
        }
        if (tree[index].id === targetId) {
            nodePathArray.push(tree[index].id)
            return true
        }
    }
}

getNodeRoute(treeArray, 112) //查找id为112的节点路径
console.log(nodePathArray.reverse().join('->'));

```
## getName
```javascript
let data = [
      {
          "name": "1-1",
          "kind": "oo",
          "children": [
              {
                  "name": "2-2",
                  "kind": "ii",

              },
              {
                  "name": "3-3",
                  "children": [
                      {
                          "name": "4-4",
                          "children": [
                              {
                                  "name": '707'
                              }
                          ]
                      }
                  ]
              }
          ]
      },
      {
          "name": "5-5",
      },
      {
          "name": "6-6"
      }
  ]
  function getName(data, key = "name") {
      let result = [];
      if (Array.isArray(data)) {
          for (let item of data) {
              if (item[key]) {
                  result.push(item[key]);
              }
              if (item.children) {
                  result = result.concat(getName(item.children));
              }
          }
          return result;
      } else {
          return result;
      }
  }

  console.log(getName(data))
```
